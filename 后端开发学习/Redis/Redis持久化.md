**RDB**——快照文件
 **SAVE**，阻塞情况下使用
 **BgSAVE**，分线程进行持久化
 
在默认情况下，会在Redis服务器断开时进行持久化操作，但如果异常中断就会导致数据的丢失
因此可以在conf里进行配置
![[Pasted image 20250909205355.png]]

bgsave开启时会fork主进程得到子进程，子进程共享主进程的内存数据，完成fork后读取内存数据并写入RDB文件
![[Pasted image 20250915223122.png]]
在操作过程中，会将A和B设置为read-only数据
主进程执行读操作的时候，访问共享内存
主进程执行写过程中，拷贝数据执行写操作
**问题**：因此可能在RDB时，在特殊情况下导致物理内存溢出

**AOF**——追加文件
AOF文件每一个写命令都会记录在AOF文件中，类似于二进制的binlog——记录数据变化操作。
默认关闭，需要redis.conf配置开启
![[Pasted image 20250915223632.png|600]]
![[Pasted image 20250915224051.png]]


