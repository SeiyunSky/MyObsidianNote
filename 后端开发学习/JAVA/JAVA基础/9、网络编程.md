IP 设备在网络中的地址
端口号 应用程序在设备中的唯一标识
协议 数据在网络中传输的规则——UDP.TCP.http.https
![[Pasted image 20250818223159.png]]
**InetAddress类**

```java
static InetAddress getByName(String host)
确定主机名称的IP地址
String getHostName() 获取此IP地址的主机名
String getHostAddress() 返回文本显示中的IP地址字符串
```

**协议**
**UPD** 用户数据报协议——面向无连接通信协议
一次发送最多64K，数据不安全，易丢失数据

**TCP** 传输控制协议——面向连接
没有大小限制，数据安全

### UDP通信程序
- 创建发送端的DatagramSocket对象
- 数据打包DatagramPacket
- 发送数据
- 释放资源
**发送数据基本流程**
```java
public class SendMessageDemo{
    1 创建Socket对象——快递公司
    //绑定端口后，以此端口往外发送
    //空参情况下随机选择可用端口发送数据
    DatagramSocket ds = new DatagramSocket();

    2 打包数据
    //数据利用字节数组往外发送 byte[] bytes = str.getBytes();
    //参数可以有： offset length InetAddress port
    DatagramPacket dp = new DatagramPacket();

    3 发送数据
    ds.send(dp);
    4 释放资源
    ds.close();
}
```

 - 创建接收端DatagramSocket
 - 解包数据
 - 释放资源
**接收数据基本流程**
```java
public class ReceiveMessageDemo{
    1 创建DatagramSocket对象
    //接收一定要绑定端口
    //绑定端口一定要与发送的端口一致
    //这个发送端口，指的是打包数据内的端口，一定要一致
    DatagramSocket ds = new DatagramSocket();

    2 接收数据包
    //这里的参数需要放offset 和 length
    DatagramPacket dp = new DatagramPacket(); 
    //该方法是阻塞的，程序会在此地等到获得消息为止
    dp.receive(dp);

    3 解包数据
    dp.getData();dp.geyPort();dp.getAddress();
}
```

**UDP的三种通信方式**
 单播——一对一

 组播——一对部分
```java
组播地址：224.0.0.0~239.255.255.255
其中224.0.0.0~224.0.0.225 是预留的组播地址

对于发送端
//发送包内的address放入组播地址 224.0.0.1

对于接收端
//创建的“快递公司”换成MulticastSocket
MulticastSocket ms = new MulticastSocket();
//将本机添加进224.0.0.1组
InetAddress address = InetAddress.getByName("224.0.0.1")
ms.joinGroup(address);
```
 广播——一对多
 ```
 广播地址:255.255.255.255

 广播和单播没啥区别，改成向255.255.255.255发送即可
 ```

### **TCP通信程序**
 在通信两端各建立一个Socket对象，通过产生IO流来进行网络通信
 
 **客户端**
 - 创建客户端Socket对象与指定服务端连接
    Socket(String host , int post)
 - 获取输出流，写数据
    OutputSream getOutputSream()
 - 释放资源
    void close()
```JAVA
//在创建对象的同时会连接服务器  【三次握手】
//连接失败报错
//这是一个连接通道
Socket socket  = new Socket("服务器IP",服务器端口);

//从连接通道获取输出流
OutputStream os = socket.getOutputStream();
//直接写出数据
os.write(字节流);

os.close();
socket.close();  //四次挥手协议
```

  **服务器**
 - 创建服务器端的Socket对象
    ServerSocket(int port)
 - 监听客户端连接返回Socket对象
    Socket accept()
 - 获取输入流，读数据
    InputStream getInputStream()
```java
//创建对象
ServerSocket ss = new ServerSocket(端口);

//监听客户端连接
Socket socket = ss.accept();

//从连接通道获取输入流
InputStream is = socket.getInputStream();
//读中文需要用转换流变成字符流
InputSreamReader isr = new InputStreamReader(is);
//简单写法，利用缓存流加速
BufferedReader br =new BufferedReader(new InputStreamReader(socket.getInputStream()));

"这里直接用read()简单读取"
```

**三次握手协议**——保证连接建立
客户端向服务器发送连接请求等待服务器确认
服务器向客户端返回响应告诉客户端收到请求

**四次挥手协议**——保证连接断开数据处理完毕
客户端向服务器发送取消链接
服务器向客户端返回响应表示收到请求
服务器完成数据处理后，发送确认取消消息
客户端再次发送确认消息，连接取消

