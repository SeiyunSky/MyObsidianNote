- 线程池核心类
```java
public ThreadPoolExecutor(
    int corePoolSize,      // 核心线程数
    int maximumPoolSize,   // 最大线程数
    long keepAliveTime,    // 空闲线程存活时间
    TimeUnit unit,         // 时间单位
    BlockingQueue<Runnable> workQueue, // 任务队列 这个看8.2
    ThreadFactory threadFactory,       // 线程工厂
    RejectedExecutionHandler handler   // 拒绝策略
)
```

**线程池代码实现**
- **创建线程池**
```java
//创建一个没上限的线程池
ExecutorService newCachedThreadPool()
//创建有上限线程池
//此时如果没有空闲线程，任务会排队等待
ExecutorService newFixedThreadPool(int nThreads)
//单线程池
ExecutorService newSingleThreadExecutor();
//定时任务线程池
ScheduledExecutorService newScheduledThreadPool(int nThreads);
```

```java
//创建一个没上限的线程池
ExecutorService pool = ExecutorService.newCachedThreadPool();

//提交任务(可以提交Runnable和Callable实现类)
pool1.submit(new 实现接口的类名);

//关闭线程池
pool1.shutdown();
```

**任务拒绝策略**

| `AbortPolicy`（默认）     | 抛出`RejectedExecutionException` |
| --------------------- | ------------------------------ |
| `CallerRunsPolicy`    | 让提交任务的线程自己执行                   |
| `DiscardPolicy`       | 静默丢弃任务                         |
| `DiscardOldestPolicy` | 丢弃队列最旧的任务并重试                   |

![[Pasted image 20250815115541.png]]